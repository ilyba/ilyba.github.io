<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Des exports de données scalables et performants : activez le mode asynchrone d’ActiveAdmin | ILYBA</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Des exports de données scalables et performants : activez le mode asynchrone d’ActiveAdmin" />
<meta property="og:locale" content="fr" />
<meta name="description" content="L’exportation de données est une fonctionnalité essentielle dans de nombreuses applications web modernes. Dans ActiveAdmin, les exports CSV sont générés de manière synchrone par défaut. Cependant, lorsque les données à exporter sont volumineuses, cette approche peut entraîner un blocage prolongé des connexions HTTP, ce qui nuit aux performances globales de l’application." />
<meta property="og:description" content="L’exportation de données est une fonctionnalité essentielle dans de nombreuses applications web modernes. Dans ActiveAdmin, les exports CSV sont générés de manière synchrone par défaut. Cependant, lorsque les données à exporter sont volumineuses, cette approche peut entraîner un blocage prolongé des connexions HTTP, ce qui nuit aux performances globales de l’application." />
<link rel="canonical" href="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" />
<meta property="og:url" content="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" />
<meta property="og:site_name" content="ILYBA" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-25T19:37:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Des exports de données scalables et performants : activez le mode asynchrone d’ActiveAdmin" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-25T19:37:00+00:00","datePublished":"2024-04-25T19:37:00+00:00","description":"L’exportation de données est une fonctionnalité essentielle dans de nombreuses applications web modernes. Dans ActiveAdmin, les exports CSV sont générés de manière synchrone par défaut. Cependant, lorsque les données à exporter sont volumineuses, cette approche peut entraîner un blocage prolongé des connexions HTTP, ce qui nuit aux performances globales de l’application.","headline":"Des exports de données scalables et performants : activez le mode asynchrone d’ActiveAdmin","mainEntityOfPage":{"@type":"WebPage","@id":"/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html"},"url":"/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" type="text/css" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="ILYBA" /></head>
  
  <body>
    <header>
      <a class="logo" href="/">
        <img style="margin-bottom: -0.15em; height: 1em;" src="/assets/images/logo.svg" />
        ILYBA
      </a>

      <nav class="menu">
        
        
          <a href="/services/">Services</a>
        
          <a href="/blog/">Blog</a>
        
          <a href="/pricing/">Nos tarifs</a>
        
          <a href="/contact/">Contact</a>
        
      </nav>
    </header>

    <main>
      <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Des exports de données scalables et performants : activez le mode asynchrone d&#39;ActiveAdmin</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2024-04-25T19:37:00+00:00" itemprop="datePublished">Apr 25, 2024
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>L’exportation de données est une fonctionnalité essentielle dans de nombreuses
applications web modernes. Dans ActiveAdmin, les exports CSV sont générés
de manière synchrone par défaut. Cependant, lorsque les données à exporter sont volumineuses,
cette approche peut entraîner un blocage prolongé des connexions HTTP,
ce qui nuit aux performances globales de l’application.</p>

<p>Lorsqu’une connexion reste occupée trop longtemps, cela peut épuiser
les ressources du serveur, entraînant des retards pour les utilisateurs suivants.
Si cette situation persiste et que les ressources sont complètement épuisées,
les requêtes des autres utilisateurs se retrouvent bloquées rendant
l’application inaccessible.</p>

<p>Pour remédier à cette situation, la gem <code class="language-plaintext highlighter-rouge">activeadmin-async_exporter</code>
a été initialement développée pour permettre la génération d’exports
de manière asynchrone via ActiveJob. Cependant, nous avons rencontré
plusieurs défis avec cette solution. Tout d’abord,
la gem activeadmin-async_exporter n’est plus maintenue
et n’est pas compatible avec les versions les plus récentes de Rails.</p>

<p>Lors de nos tentatives d’installation, nous avons rencontré une erreur <code class="language-plaintext highlighter-rouge">NameError</code>,
apparemment liée à des problèmes d’autoloading. De plus, la configuration des
strong_parameters n’est pas prise en compte, et la gem utilise
la méthode <code class="language-plaintext highlighter-rouge">current_admin_user</code>, alors que notre application utilise <code class="language-plaintext highlighter-rouge">current_user</code>.</p>

<p>Bien que ActiveAdmin permette de configurer ces aspects,
la gem <code class="language-plaintext highlighter-rouge">activeadmin-async_exporter</code> ne tient pas compte de ces configurations.</p>

<p>En outre, la gestion d’ActiveStorage n’est pas prise en charge par la gem,
qui utilise un autre système pour le stockage des fichiers.</p>

<p>Bien que la gem propose un générateur de fichiers de code pour configurer
une migration de base de données et une ressource ActiveAdmin, son utilisation
n’est pas documentée dans le README. Celui-ci mentionne simplement l’ajout de
la gem au Gemfile sans fournir de directives supplémentaires.</p>

<p>Face à ces limitations, nous avons décidé de reprendre le code
de la gem <code class="language-plaintext highlighter-rouge">activeadmin-async_exporter</code> dans notre application afin de
le personnaliser selon nos besoins spécifiques.</p>

<p>Nous n’avons pas encore publié la gem car, pour le moment, nos efforts sont concentrés
sur d’autres aspects de notre projet. Bien que le code actuel fonctionne
pour nos besoins internes, nous n’avons pas planifié de consacrer
du temps supplémentaire pour l’adapter à une éventuelle publication publique.
Nous préférons donc pour l’instant le laisser en l’état, sans toutefois exclure
définitivement la possibilité d’une publication future.</p>

<p>L’extraction du code nous a présenté certains défis techniques.
En particulier, le worker doit hériter de la classe ApplicationJob,
ce qui implique de placer le code dans le dossier <code class="language-plaintext highlighter-rouge">app/workers</code>.
De plus, certains aspects du code ont dû être modifiés pour assurer
sa compatibilité avec notre application.</p>

<p>Malgré ces difficultés, l’utilisation d’exports asynchrones
dans ActiveAdmin s’est révélée cruciale pour améliorer les performances
de notre applications. En adaptant la gem existante à nos besoins
spécifiques, nous avons pu bénéficier de cette technologie
tout en conservant un contrôle total sur son fonctionnement.</p>

  </div><a class="u-url" href="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" hidden></a>
</article>

    </main>

    <footer>
      <p>&copy; ILYBA</p>
      <nav>
        
          Français |
          
          <a href="/en/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" >English</a> |
          
          <a href="/ja/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" >日本語</a>
        
      </nav>
    </footer>
  </body>
</html>
