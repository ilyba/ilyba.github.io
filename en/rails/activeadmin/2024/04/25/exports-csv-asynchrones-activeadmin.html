<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Asynchronous Exports in ActiveAdmin | ILYBA</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Asynchronous Exports in ActiveAdmin" />
<meta property="og:locale" content="en" />
<meta name="description" content="Introduction" />
<meta property="og:description" content="Introduction" />
<link rel="canonical" href="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" />
<meta property="og:url" content="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" />
<meta property="og:site_name" content="ILYBA" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-25T19:37:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Asynchronous Exports in ActiveAdmin" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-25T19:37:00+00:00","datePublished":"2024-04-25T19:37:00+00:00","description":"Introduction","headline":"Asynchronous Exports in ActiveAdmin","mainEntityOfPage":{"@type":"WebPage","@id":"/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html"},"url":"/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" type="text/css" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="ILYBA" /></head>
  
  <body>
    <header>
      <a style="text-decoration: none" class="logo" href="/en">
        <img style="margin-bottom: -0.15em; height: 1em;" src="/assets/images/logo.svg" />
        ILYBA
      </a>

      <nav class="menu">
        
        
          <a href="/en/services/">Services</a>
        
          <a href="/en/blog/">Blog</a>
        
          <a href="/en/pricing/">Pricing</a>
        
          <a href="/en/contact/">Contact</a>
        
      </nav>
    </header>

    <main>
      <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Asynchronous Exports in ActiveAdmin</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2024-04-25T19:37:00+00:00" itemprop="datePublished">April 25, 2024</time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="introduction">Introduction</h1>

<p>Data export is a feature present in most enterprise applications. ActiveAdmin offers an export feature by default, which functions synchronously, meaning the generation of data occurs at the client’s request.</p>

<h1 id="the-problem-with-synchronous-exports">The Problem with Synchronous Exports</h1>

<p>However, when the volume of data to be exported is significant, the process can take time. The server, being occupied, is not available to handle requests that pile up, leading to a bottleneck. Performance degrades, and users notice that the application is slow.</p>

<p>If the situation worsens, the backlog becomes too substantial, and the server is no longer able to process requests promptly. The application then starts returning errors. If the situation continues to deteriorate, the application ceases to function entirely and becomes inaccessible.</p>

<h1 id="implementing-an-asynchronous-solution">Implementing an Asynchronous Solution</h1>

<p>Faced with this type of problem, we used the gem <a href="https://github.com/rootstrap/activeadmin-async_exporter"><code class="language-plaintext highlighter-rouge">activeadmin-async_exporter</code></a> to address it. This library allows for asynchronous data exports in ActiveAdmin with ActiveJob. However, we had to make adaptations to use this solution.</p>

<p>Firstly, the gem <code class="language-plaintext highlighter-rouge">activeadmin-async_exporter</code> is no longer maintained by its author and was not compatible with our version of Rails. Therefore, we had to modify it and update its dependencies.</p>

<p>We made some additional adaptations to handle parameters with strong_parameters and resolve a missing method issue due to our application’s use of <code class="language-plaintext highlighter-rouge">current_user</code> while the gem author uses <code class="language-plaintext highlighter-rouge">current_admin_user</code>.</p>

<p>Unlike our application, the gem does not use ActiveStorage for attachments. We also adapted this part accordingly.</p>

<p>To record the request, the gem provides a generator for the migration to create the necessary tables in the database. The gem also provides an ActiveAdmin generator for the interface to manage exports. However, these generators are undocumented.</p>

<p>We eventually incorporated the code of the gem directly into our application and customised it according to our needs.</p>

<h1 id="publishing-in-a-gem">Publishing in a Gem</h1>

<p>We decided not to publish our modifications as a new gem since the code is integrated into our application, and it would require a new effort for adaptation. Furthermore, given the little activity on this library, I am not convinced this solution necessarily meets a community need, though it proved very useful in improving our application’s performance.</p>

<p>Nevertheless, if you are interested in these modifications, have questions or comments, do not hesitate to contact me for further information.</p>

<h1 id="conclusion">Conclusion</h1>

<p>This anecdote illustrates, through a concrete example, the type of problem that can arise during the evolution of an application. The solution based on the use and adaptation of an unpopular and unmaintained gem may seem atypical, but this approach actually follows a very classic process of resolving a technical issue.</p>

  </div>

  
  
    <p>&raquo; <a rel="next" href="/en/rails/actioncontroller/actionview/2024/10/15/les-bonnes-pratiques-avec-les-formulaires-rails.html">Best Practices Guide for Simple and Clean Rails Forms</a> &raquo;
  

  <a class="u-url" href="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" hidden></a>
</article>

    </main>

    <footer>
      <p>&copy; ILYBA</p>
      <nav>
        
          
          <a href="/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" >Français</a> |
          English |
          
          <a href="/ja/rails/activeadmin/2024/04/25/exports-csv-asynchrones-activeadmin.html" >日本語</a>
        
      </nav>
    </footer>
  </body>
</html>
